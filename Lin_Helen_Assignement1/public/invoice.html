<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="./invoice.js"></script>
    <title>Invoice</title>
  </head>

  <body>
    <h1 style="text-align: center">Invoice</h1>

    <!-- table headers -->
    <table
      style="
        margin-left: auto;
        margin-right: auto;
        border: 1px solid black;
        border-collapse: collapse;
        text-align: center;
        width: 60%;
      "
    >
      <tr>
        <td style="width: 250px">Item</td>
        <td style="width: 11%; border: 1px solid black">Quantity</td>
        <td style="width: 11%; border: 1px solid black">Price</td>
        <td style="width: 125px; border: 1px solid black">Extended Price</td>
      </tr>
    </table>

    <script>
      let tax = 0; //subtotal * HI state tax
      let subtotal = 0;
      let delivery = 2.0;
      let total = 0;

      //convert string array to integer array
      for (i = 0; i < products.Milk_Tea.length; i++) {
        quantityArray[i] = Number(quantityArray[i]);
        let subtotalArray = [];
        //calculate extended cost of each drink and add to subtotal array
        subtotalArray[i] = products.Milk_Tea[i].price * quantityArray[i];
        //calculate sum of subtotal array
        subtotal += subtotalArray[i]; //calculate subtotal
        tax = subtotal * 0.04712; //calculate tax (subtotal * HI state tax )
        total = subtotal + tax; //calculate total (subtotal * tax + delivery)
      }

      //loop through quantity and print out quantity for each selected drink
      //content of table
      for (i = 0; i < quantityArray.length; i++) {
        if (quantityArray[i] != 0) {
          document.write(`
                 <table style="margin-left: auto; margin-right: auto; border: 1px solid black;  border-collapse: collapse; text-align: center; width: 60%;">
                    <tr>
                    <td style="width:250px">${products.Milk_Tea[i].name}</td>
                    <td style="width:11%;border: 1px solid black">${
                      quantityArray[i]
                    }</td>
                    <td style="width:11%;border: 1px solid black">$${
                      products.Milk_Tea[i].price
                    }</td>
                    <td style="width:125px;border: 1px solid black">$${
                      products.Milk_Tea[i].price * quantityArray[i]
                    }</td>
                  </tr>
                  </table>
                  `);
        }
      }

      //print subtotal, total, tax on html
      document.write(`    <table
        style="
          margin-left: auto;
          margin-right: auto;
          border: 1px solid black;
          border-collapse: collapse;
          text-align: center;
          width: 60%;
        "
      >
        <tr>
          <td style="width: 250px">Subtotal: </td>
          <td style="width: 11%; border: 1px solid black">$${subtotal.toFixed(
            2
          )}</td>
        </tr>
        <tr>
          <td style="width: 250px">Tax (4.712%):</td>
          <td style="width: 26%; border: 1px solid black">$${tax.toFixed(
            2
          )}</td>
        </tr>
        <tr>
          <td style="width: 250px">Delivery:</td>
          <td style="width: 26%; border: 1px solid black">$${delivery.toFixed(
            2
          )}</td>
        </tr>
        <tr>
          <td style="width: 250px">Total:</td>
          <td style="width: 26%; border: 1px solid black">$${total.toFixed(
            2
          )}</td>
        </tr>
      </table>`);
    </script>
  </body>
</html>
